import pylab

def ReadArray(fname):
    io = open(fname, 'r')
    line = io.readline()
    if (line[0] != '#'):
        print 'Error in ReadArray!'
        exit()
    splitline = line.split()[1:]
    dim = []
    for i in splitline:
        dim.append (int(i))
    dimtuple = tuple(dim)

    data = pylab.load(fname)
    return data.reshape(dimtuple)


def WriteArray(fname, data):
    io = open (fname, 'w')
    io.write('#')
    for i in data.shape:
        io.write (' %d' % (i))
    io.write('\n')
    N = data.shape[0]
    for n in data.shape[1:]:
        N = N * n
    for d in data.reshape((N)):
        io.write ('%1.16e\n' % (d))
    io.close()

    
    
